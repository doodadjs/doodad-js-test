<!DOCTYPE html>
<html>
	<body>
		<script async src="../../doodad-js/bundle_debug.js"></script>
		
		<!--IE8 <script>
			// <PRB> "es6-promise" needs "Array.isArray"
			if (!Array.isArray) {
				Array.isArray = function(obj) {
					return Object.prototype.toString.call(obj) === '[object Array]';
				};
			};
		</script>-->
		<script src="../../lib/es6-promise/es6-promise.min.js"></script>
		
        <script>
			(function() {
				"use strict";

				var __prevOnLoad__ = window.onload;
				window.onload = function onload(ev) {
					if (__prevOnLoad__) {
						__prevOnLoad__.call(this, ev);
					};

					var SECRET = ((typeof Symbol === 'function') ? Symbol() : []);

				    var options = {secret: SECRET};

					options['Doodad.Modules'] = {
						modulesUri: '../..',
					};

					var root = window.createRoot(window.DD_MODULES, options),
						doodad = root.Doodad,
						modules = doodad.Modules;

					modules.load({
						'doodad-js-unicode': {},
						'doodad-js-locale': {},
						'doodad-js-safeeval': {},
						'doodad-js-loader': {},
						'doodad-js-test': {'widgets/MyWidget_loader.js': {}},
					}, options);
				};
			}).call((typeof global !== 'undefined') ? global : ((typeof window !== 'undefined') ? window : this));
		</script>
		
		<div id="test1"></div>
		<div id="test2"></div>
		<div id="test3"></div>
		
	</body>
</html>
